<html>
<head><title>D. Timetable</title></head>
<body>
<div align="justify">

<h2>D. Timetable</h2>
<table width=100% border=0 cellpadding=0 cellspacing=0>
<tr><td align="justify">

The cinema displays a timetable, showing which movies show on which screens at
what time. Because of administrative reasons, there are some weird constraints
on where and when the movies can be shown. The manager of the cinema isn't even
sure the timetable for the next day can be organized in a way that satisfies
all constraints! He turned to you for help.
<td> &nbsp;&nbsp; <td align="right">
<img width=300 alt="$$$alt" src="build.jpg">
</table>
<p>

The timetable is a table, where each row is a 2 hour block, and each column
represents one of the screens. For each time block, there are a number of
movies they want to show. One movie can be shown on several screens, but only
consecutive screens (that is, screens that are neighboring columns in the
timetable). There can be screens that don't show any movies in a time block.
The cinema always has enough screens, there is no limit on that. One screen
can only show one movie in one time block.

<p>

The extra constraints are on which movies can follow each other on the same
screen.
For each movie <i>m</i>, there is a list of companion movies from the previous
time
block that it can follow on the same screen. For each of the companion movies
on this
list, there must be at least one screen where <i>m</i> follows it. All the
screens that show <i>m</i> must either show one of the companion movies in the
previous time block, or be empty. Each movie must be shown on at least one
screen.

<p>

Tell them if it's impossible to make the timetable this way, or if it's
possible, tell them one way the movies can be distributed in the last time
block.

<h3>Input</h3>

One input file will contain several test cases. The first line contains one
number, <i>T</i>, the number of test cases. Then <i>T</i> test cases follow
in the following format.
<p>
The fist line of a test case contains one number, <i>B</i>, the number of time
blocks in that test case. Then, for each of the <i>B</i> blocks, the movies
are described in the following way.
<p>
The first line of a time block contains one number, <i>M</i>, the number of
movies to be shown in that time block. Each movie is described on one line,
first is the number <i>L</i>, which is the length of the list of companion
movies. The rest of the line is <i>L</i> numbers, the indices of the companion
movies from the previous time block.

<h3>Output</h3>

Each test case should correspond to one line of output. If the timetable is
impossible to make, write "impossible", without quotes, on the line. Otherwise
write one possible ordering of the movies in the last time block. That is,
the order in which they would appear in the last row of the timetable,
separated by spaces.
(Each movie in the last time block will appear exactly once, because they
have to be shown only on consecutive screens.)

<h3>Example</h3>

In the example there are 2 test cases. For the first case, one way to arrange
the table is like this:
<ul>
<li>In the first time block, movie 0 is on screens 1 and 2, movie 1 is on screens 3 and 4</li>
<li>In the second time block, movie 0 is on screens 2 and 3, movie 1 is on screen 0 and movie 2 is on screen 4</li>
</ul>
<p>
The second test case is similar, but there is a movie in the third time block.
There is no way to show it, because it would need to follow two movies that were
shown on the two ends of the cinema, but it can't follow the movie that was shown
in the middle.

<table width=100% border=0 cellpadding=0 cellspacing=0>
<tr>
<td valign=top><h3>Example input</h3>
<pre>
2
2
2
0
0
3
2 0 1
1 0
1 1
3
2
0
0
3
1 0
2 0 1
1 1
1
2 0 2
</pre>

<td valign=top><h3>Example output</h3>
<pre>
1 0 2
impossible
</pre>
</table>

</div>
</body>
</html>
